var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(d,g,f){if(f.get||f.set)throw new TypeError("ES3 does not support getters and setters.");d!=Array.prototype&&d!=Object.prototype&&(d[g]=f.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(d){return $jscomp.SYMBOL_PREFIX+(d||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(d){var g=0;return $jscomp.iteratorPrototype(function(){return g<d.length?{done:!1,value:d[g++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};$jscomp.makeIterator=function(d){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var g=d[Symbol.iterator];return g?g.call(d):$jscomp.arrayIterator(d)};
$jscomp.checkStringArgs=function(d,g,f){if(null==d)throw new TypeError("The 'this' value for String.prototype."+f+" must not be null or undefined");if(g instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");return d+""};
$jscomp.polyfill=function(d,g,f,m){if(g){f=$jscomp.global;d=d.split(".");for(m=0;m<d.length-1;m++){var p=d[m];p in f||(f[p]={});f=f[p]}d=d[d.length-1];m=f[d];g=g(m);g!=m&&null!=g&&$jscomp.defineProperty(f,d,{configurable:!0,writable:!0,value:g})}};$jscomp.polyfill("String.prototype.includes",function(d){return d?d:function(d,f){return-1!==$jscomp.checkStringArgs(this,d,"includes").indexOf(d,f||0)}},"es6-impl","es3");
(function(){function d(){if(H&&w){document.getElementById("downArrow").classList.add("notDisplayed");document.getElementById("leftList").classList.remove("notDisplayed");document.getElementById("ships").classList.add("notDisplayed");document.getElementById("startGame").classList.add("notDisplayed");document.getElementById("strtOvrBtn").classList.remove("notDisplayed");window.modal("Game on!",1500);window.gameStarted=!0;for(var a=0;10>a;a++)for(var b=0;10>b;b++){var c=document.getElementById("c"+a+
b);c.removeEventListener("mouseleave",Z);c.removeEventListener("click",P);c.removeEventListener("mouseover",Q);c.removeEventListener("mouseleave",R);c.classList.remove("curserPointer")}}}var g=window.randomIntFromInterval(0,1),f=0,m,p,u,k,y="hor",S=0,I=0,n="",v=0,H=!1,T=!1,U=!1,V=!1,W=!1,X=!1,w=!1,J=!1,K=!1,L=!1,M=!1,N=!1,h=[],ha=document.getElementById("gameboard_cpu"),ia=document.getElementById("carrier"),ja=document.getElementById("battleship"),ka=document.getElementById("cruiser"),la=document.getElementById("submarine"),
ma=document.getElementById("destroyer"),na=new Audio("sounds/Ship Sunk Sound.mp3"),O=[],oa=[ia,ja,ka,la,ma],l={battleship:4,carrier:5,cruiser:3,destroyer:2,submarine:3},aa="Found You!;You're Sunk!;Down she goes!;Gotcha!;Ha Ha!;I'm the best!;Woo Hoo!;I'm Better!;I'm gonna win!;Easy!;Sink that ship!;Try Harder!;Yawn...;Sunk!;Oh Yeah!;You're Gonna Lose!;Really? Easy..;Yes!!;So Easy!;Child's Play!;:)".split(";"),z=function(a,b){return 0<=a&&10>a&&0<=b&&10>b},pa=function(a){return a.charAt(0).toUpperCase()+
a.slice(1)},A=function(a,b){na.play();document.getElementById(b+"Sunk_cpu").classList.remove("hitText");document.getElementById(b+"Sunk_cpu").classList.add("sunkText");for(var c=0;10>c;c++)for(var e=0;10>e;e++)q(c,e,b)&&r(c,e)&&(window.addClassFromElementById("c"+c+e,"darkRedBackground"),window.removeClassFromElementById("c"+c+e,"redBackground"));I-=a;n="";g=window.randomIntFromInterval(0,1);for(c=0;10>c;c++)for(e=0;10>e;e++)q(c,e,b)&&(h[c][e][0]=4);0===window.randomIntFromInterval(0,10)?window.modal(pa(b)+
" Sunk!",1500):window.modal(aa[window.randomIntFromInterval(0,aa.length-1)],1500);if(0<I)a:for(c=0;10>c;c++)for(e=0;10>e;e++)if(r(c,e)){m=c;p=e;break a}},ca=function(){for(var a=0;10>a;a++)for(var b=0;10>b;b++)"hor"===y?(document.getElementById("c"+a+b).removeEventListener("mouseover",Y),document.getElementById("c"+a+b).addEventListener("mouseover",ba)):(document.getElementById("c"+a+b).removeEventListener("mouseover",ba),document.getElementById("c"+a+b).addEventListener("mouseover",Y));y="hor"===
y?"ver":"hor"},ba=function(a){for(var b=a.target.id,c=!0,e=0;e<k;e++)if(!t(Number(b[1])+e,Number(b[2]))){c=!1;break}if(Number(b[1])<11-k&&c)for(a.target.addEventListener("click",B),a=0;a<k;a++)document.getElementById(b[0]+(Number(b[1])+a)+b[2]).classList.add("blackBackground");else a.target.removeEventListener("click",B)},Y=function(a){for(var b=a.target.id,c=!0,e=0;e<k;e++)if(!t(Number(b[1]),Number(b[2])+e)){c=!1;break}if(Number(b[2])<11-k&&c)for(a.target.addEventListener("click",B),a=0;a<k;a++)document.getElementById(b[0]+
b[1]+(Number(b[2])+a)).classList.add("blackBackground");else a.target.removeEventListener("click",B)},Z=function(){for(var a=0;10>a;a++)for(var b=0;10>b;b++)t(a,b)&&(document.getElementById("c"+a+b).classList.remove("blackBackground"),document.getElementById("c"+a+b).classList.remove("greyBackground"))},P=function(a){if(0===k&&!window.gameStarted){var b,c=Number(a.target.id[1]),e=Number(a.target.id[2]),d=$jscomp.makeIterator(h[c][e]);d.next();d=d.next().value;switch(d){case "carrier":T=!1;break;case "battleship":U=
!1;break;case "cruiser":V=!1;break;case "submarine":W=!1;break;case "destroyer":X=!1}k=l[d];u=d;document.getElementById(d).classList.remove("hidden");da.forEach(function(a){return document.getElementById(a).classList.remove("clicked")});document.getElementById(d).classList.add("clicked");v--;for(var d=$jscomp.makeIterator(O),f=d.next();!f.done;f=d.next())for(var f=f.value,ea=$jscomp.makeIterator(f),g=ea.next();!g.done;g=ea.next())if(g=g.value,g[0]===c&&g[1]===e){y="hor"===h[g[0]][g[1]][2]?"ver":"hor";
b=f;break}b.forEach(function(a){var b=document.getElementById("c"+a[0]+a[1]);b.removeEventListener("mouseover",Q);b.removeEventListener("mouseleave",R);b.removeEventListener("click",P);b.classList.remove("curserPointer");h[a[0]][a[1]][0]=0;h[a[0]][a[1]][1]=""});O.splice(O.indexOf(b),1);qa();H=w=!1;document.getElementById("startGame").classList.contains("notDisplayed")||document.getElementById("startGame").classList.add("notDisplayed");ca()}a.stopImmediatePropagation()},da=["carrier","battleship",
"cruiser","submarine","destroyer"],ra=function(a){if(!w){var b=a.target.parentElement.id;document.getElementById(b).classList.contains("clicked")?(document.getElementById(b).classList.remove("clicked"),k=0):(da.forEach(function(a){return document.getElementById(a).classList.remove("clicked")}),"carrier"!==b||T)?"battleship"!==b||U?"cruiser"!==b||V?"submarine"!==b||W?"destroyer"!==b||X||(k=l[b],a.target.parentElement.classList.add("clicked")):(k=l[b],a.target.parentElement.classList.add("clicked"),
u="submarine"):(k=l[b],a.target.parentElement.classList.add("clicked"),u="cruiser"):(k=l[b],a.target.parentElement.classList.add("clicked")):(k=l[b],a.target.parentElement.classList.add("clicked"))}},Q=function(a){if(0===k){a=$jscomp.makeIterator(h[Number(a.target.id[1])][Number(a.target.id[2])]);a.next();a=a.next().value;for(var b=0;10>b;b++)for(var c=0;10>c;c++)q(b,c,a)&&(document.getElementById("c"+b+c).classList.remove("blackBackground"),document.getElementById("c"+b+c).classList.add("greyBackground"))}},
R=function(a){a=$jscomp.makeIterator(h[Number(a.target.id[1])][Number(a.target.id[2])]);a.next();a=a.next().value;for(var b=0;10>b;b++)for(var c=0;10>c;c++)q(b,c,a)&&(document.getElementById("c"+b+c).classList.add("blackBackground"),document.getElementById("c"+b+c).classList.remove("greyBackground"))},qa=function(){for(var a=0;10>a;a++)for(var b=0;10>b;b++)document.getElementById("c"+a+b).classList.contains("greyBackground")&&(document.getElementById("c"+a+b).classList.add("blackBackground"),document.getElementById("c"+
a+b).classList.remove("greyBackground"))},C=function(a,b,c){h[a][b][1]=c;h[a][b][2]=y},B=function(){if(!H&&!w){for(var a=[],b=0;10>b;b++)for(var c=0;10>c;c++)if(document.getElementById("c"+b+c).classList.contains("blackBackground")&&""===h[b][c][1]){k===l.carrier?C(b,c,"carrier"):k===l.battleship?C(b,c,"battleship"):k===l.cruiser&&"cruiser"===u?C(b,c,"cruiser"):k===l.submarine&&"submarine"===u?C(b,c,"submarine"):k===l.destroyer&&C(b,c,"destroyer");var e=document.getElementById("c"+b+c);e.addEventListener("click",
P);e.addEventListener("mouseover",Q);e.addEventListener("mouseleave",R);e.removeEventListener("click",B);e.classList.add("curserPointer");h[b][c][0]=1;a.push([b,c])}k===l.carrier?(T=!0,v++,document.getElementById("carrier").classList.add("hidden")):k===l.battleship?(U=!0,v++,document.getElementById("battleship").classList.add("hidden")):k===l.cruiser?"cruiser"===u?(V=!0,v++,document.getElementById("cruiser").classList.add("hidden")):"submarine"===u&&(W=!0,v++,document.getElementById("submarine").classList.add("hidden")):
k===l.destroyer&&(X=!0,v++,document.getElementById("destroyer").classList.add("hidden"));5===v&&(w=H=!0,document.getElementById("startGame").classList.remove("notDisplayed"),document.getElementById("instructions").innerHTML="<b>Placed ships can be moved before starting!</b>");k=0;O.push(a)}},q=function(a,b,c){return z(a,b)&&h[a][b][1]===c},ta=function(){if(J&&K&&L&&M&&N){document.getElementById("losstext").style.display="block";window.gameOver=!0;sa();window.sleep(1500).then(function(){return window.modal("HA HA! I WIN!",
2E3)});var a=window.compWinsOnLoad()+1;window.setCookie("compwinsBattleship",a,.25);document.getElementById("compWins").textContent="Computer Wins: "+a}},ua=function(){var a=m,b=p;if("ver"===n){if(9>=a+1&&fa(a+1,b,!0))return;if(9<a+1||D(a+1,b)){for(var c=1;10>c&&!(0>a-c||3===h[a-c][b][0]||4===h[a-c][b][0]);c++){if(t(a-c,b)){E(a-c,b);return}if(F(a-c,b)){G(a-c,b);return}}f=0;n=""}}if("hor"===n){if(9>=b+1&&fa(a,b+1,!1))return;if(9<b+1||D(a,b+1)){for(c=1;10>c&&!(0>b-c||3===h[a][b-c][0]||4===h[a][b-c][0]);c++){if(t(a,
b-c)){E(a,b-c);return}if(F(a,b-c)){G(a,b-c);return}}f=0;n=""}}if(0===g){if(0===f&&""===n)if(9<a+1)f++;else if(x(a+1,b,"ver",1))return;if(1===f&&""===n)if(9<b+1)f++;else if(x(a,b+1,"hor",1))return}else{if(0===f&&""===n)if(9<b+1)f++;else if(x(a,b+1,"hor",1))return;if(1===f&&""===n)if(9<a+1)f++;else if(x(a+1,b,"ver",1))return}if(2===f&&""===n)if(0>a-1)f++;else if(x(a-1,b,"ver",-1))return;3<=f&&""===n&&x(a,b-1,"hor",-1)},fa=function(a,b,c){return t(a,b)?(E(a,b),!0):F(a,b)?(G(a,b),c?m++:p++,!0):!1},x=
function(a,b,c,e){if(t(a,b))return E(a,b),f++,!0;if(F(a,b))return G(a,b),n=c,f=0,"ver"===c?m+=e:p+=e,!0;f++;return!1},t=function(a,b){return z(a,b)&&0===h[a][b][0]},F=function(a,b){return z(a,b)&&1===h[a][b][0]},r=function(a,b){return z(a,b)&&2===h[a][b][0]},D=function(a,b){return z(a,b)&&1<h[a][b][0]},G=function(a,b){document.getElementById("c"+a+b).classList.remove("blackBackground");document.getElementById("c"+a+b).classList.add("redBackground");h[a][b][0]=2;I++;S++},E=function(a,b){document.getElementById("c"+
a+b).classList.remove("blackBackground");document.getElementById("c"+a+b).classList.add("missBackground");h[a][b][0]=3;S++},ga=function(){var a,b;if(5>S||0===window.randomIntFromInterval(0,12)){do a=window.randomIntFromInterval(0,9),b=window.randomIntFromInterval(0,9);while(0!=a%2&&0===b%2||0===a%2&&0!=b%2||[3,4,5,6].includes(a)||[3,4,5,6].includes(b))}else b=$jscomp.makeIterator(va()),a=b.next().value,b=b.next().value;m=a;p=b;t(a,b)?E(a,b):F(a,b)?G(a,b):D(a,b)&&ga()},wa=function(){if(!window.gameOver&&
window.gameStarted)if(w){0<I?ua():ga();for(var a=0;10>a;a++)for(var b=0;10>b;b++)r(a,b)&&document.getElementById(h[a][b][1]+"Sunk_cpu").classList.add("hitText");for(var c=b=a=0,e=0,d=0,f=0;10>f;f++)for(var g=0;10>g;g++)!J&&q(f,g,"carrier")&&r(f,g)?a++:!K&&q(f,g,"battleship")&&r(f,g)?b++:!L&&q(f,g,"cruiser")&&r(f,g)?c++:!M&&q(f,g,"submarine")&&r(f,g)?e++:!N&&q(f,g,"destroyer")&&r(f,g)&&d++;a===l.carrier&&(J=!0,A(5,"carrier"));b===l.battleship&&(K=!0,A(4,"battleship"));c===l.cruiser&&(L=!0,A(3,"cruiser"));
e===l.submarine&&(M=!0,A(3,"submarine"));d===l.destroyer&&(N=!0,A(2,"destroyer"));ta()}else window.modal("Place all ships!",1400)},va=function(){for(var a=[],b=[],c=0;10>c;c++){b.push([]);for(var e=0;10>e;e++)b[c].push(0)}e=0;J||a.push(l.carrier);K||a.push(l.battleship);M||a.push(l.submarine);L||a.push(l.cruiser);N||a.push(l.destroyer);for(c=0;c<a.length;c++){for(var d=0;10>d;d++)for(var f=0;f<10-a[c]+1;f++){for(var g=0;g<a[c];g++)D(d,f+g)||e++;if(e===a[c])for(e=0;e<a[c];e++)b[d][f+e]++;e=0}for(d=
0;10>d;d++)for(f=0;f<10-a[c]+1;f++){for(g=0;g<a[c];g++)D(f+g,d)||e++;if(e===a[c])for(e=0;e<a[c];e++)b[f+e][d]++;e=0}}a=0;c=[];for(e=0;10>e;e++)for(d=0;10>d;d++)b[e][d]===a?c.push([e,d]):b[e][d]>a&&(a=b[e][d],c=[],c.push([e,d]));return c[window.randomIntFromInterval(0,c.length-1)]},sa=function(){for(var a=0;10>a;a++)for(var b=0;10>b;b++)1===window.exportedGameBoard[a][b][0]&&window.addClassFromElementById("s"+a+b,"blackBackground")},xa=function(){window.addClassFromElementById("rotateArrow","rotateAnimation");
window.removeClassFromElementById("rotateArrow","rotateBackAnimation")},ya=function(){window.removeClassFromElementById("rotateArrow","rotateAnimation");window.addClassFromElementById("rotateArrow","rotateBackAnimation")};(function(){window.compMoveWindow=wa;for(var a=0;10>a;a++){h.push([]);for(var b=0;10>b;b++){h[a].push([0,""]);var c=document.createElement("div");ha.appendChild(c);c.id="c"+b+a;var e=50*a+5;c.style.top=50*b+5+"px";c.style.left=e+"px";c.style.backgroundColor="#80aaff";c.addEventListener("mouseover",
Y);c.addEventListener("mouseleave",Z)}}oa.forEach(function(a){return a.addEventListener("click",ra)});window.addEventListenerById("rotate","mouseover",xa);window.addEventListenerById("rotate","mouseleave",ya);window.addEventListenerById("rotate","click",ca);window.addEventListenerById("startGame","click",d);document.getElementById("compWins").textContent="Computer Wins: "+window.compWinsOnLoad();document.addEventListener("keydown",function(a){192===a.keyCode&&console.log(h)});"Y"===window.getCookie("darkMode")?
window.setDarkMode():window.removeDarkMode()})()})();
