(()=>{function p(a){let e=!1;if(window.gameStarted&&!window.gameOver){if(a.target===a.currentTarget){B();const g=a.target.id.substring(1,2),c=a.target.id.substring(2,3);if(0==h[g][c][0])h[g][c][0]=3,document.getElementById("s"+g+c).classList.add("miss"),document.getElementById("s"+g+c).classList.add("missBackground"),window.currentColor="#4d88ff",C.play();else if(1==h[g][c][0]){document.getElementById("s"+g+c).style.backgroundColor="red";h[g][c][0]=2;document.getElementById("s"+g+c).classList.add("hit");
window.currentColor="red";D.play();q++;let f=0;for(const d of r)for(const b of d)if(b[0]==g&&b[1]==c)for(const n of d)if(2==h[n[0]][n[1]][0]&&f++,f==d.length){window.currentColor="darkred";for(const t of d)document.getElementById("s"+t[0]+t[1]).style.backgroundColor="darkred";document.getElementById(h[n[0]][n[1]][1]+"Sunk").classList.add("sunkText");e=!0;E.play()}if(17==q){document.getElementById("wintext").style.display="block";window.gameOver=!0;window.modal("YOU WIN!!!",3E3);a=window.playerWinsOnLoad()+
1;window.setCookie("playerwinsBattleship",a,.25);document.getElementById("playerWins").textContent="Player Wins: "+a;return}}else if(1<h[g][c][0]){window.modal("Can't Fire Here!",1400);u();return}}window.sleep(200).then(()=>F(e));a.stopPropagation()}}function u(){for(let a=0;10>a;a++)for(let e=0;10>e;e++)document.getElementById("s"+a+e).addEventListener("click",p)}function B(){for(let a=0;10>a;a++)for(let e=0;10>e;e++)document.getElementById("s"+a+e).removeEventListener("click",p)}function k(a){const e=
[],g=G[v];var c=window.randomIntFromInterval(1,2);let f,d;do f=window.randomIntFromInterval(0,9);while(l.includes(f));do d=window.randomIntFromInterval(0,9);while(m.includes(d));var b=0;if(1==c)if(d>=a-1){for(c=0;c<a;c++)0==h[f][d-c][0]&&b++;if(b==a){for(b=0;b<a;b++)h[f][d-b][0]=1,h[f][d-b][1]=g,e.push([f,d-b]);l.push(f);m.push(d)}else k(a)}else{for(c=0;c<a;c++)0==h[f][d+c][0]&&b++;if(b==a){for(b=0;b<a;b++)h[f][d+b][0]=1,h[f][d+b][1]=g,e.push([f,d+b]);l.push(f);m.push(d)}else k(a)}else if(f>=a-1){for(c=
0;c<a;c++)0==h[f-c][d][0]&&b++;if(b==a){for(b=0;b<a;b++)h[f-b][d][0]=1,h[f-b][d][1]=g,e.push([f-b,d]);l.push(f);m.push(d)}else k(a)}else{for(c=0;c<a;c++)0==h[f+c][d][0]&&b++;if(b==a){for(b=0;b<a;b++)h[f+b][d][0]=1,h[f+b][d][1]=g,e.push([f+b,d]);l.push(f);m.push(d)}else k(a)}0!=e.length&&(r.push(e),v++)}let q=0;const h=[],H=document.getElementById("gameboard"),D=new Audio("sounds/Hit Ship Sound.mp3"),C=new Audio("sounds/Miss Fire Sound.mp3"),E=new Audio("sounds/Ship Sunk Sound.mp3"),r=[],w="Thinking... Hmm... Finding... Tracking... Spotting... Hunting... Looking... Scanning... Seeking...".split(" "),
x="Fire! Launch! Blast! BOOM! BANG! There! Attack!".split(" "),y="Aww Man!;SOS!;I'm Going Down!;Capsized!;I'm Sinking!;Cheater!;Shipwreck!;No Fair!;Hull Breach!;I won't lose!;Abandon Ship!;Overboard!;Stop it!;No Way!;Hey! Stop!;You wont win!;Lucky Shot!;:(".split(";"),I=function(a){window.currentColor=a.target.style.backgroundColor;"rgb(128, 170, 255)"===a.target.style.backgroundColor&&(a.target.style.backgroundColor="#87CEFA")},J=function(a){a.target.style.backgroundColor=window.currentColor},z=
()=>{document.getElementById("thinking").style.display="flex";window.uiBlocker(2E3);window.sleep(1400).then(()=>{document.getElementById("message").innerText=x[window.randomIntFromInterval(0,x.length-1)]});window.sleep(2E3).then(()=>{document.getElementById("thinking").style.display="none";window.sleep(300).then(()=>{u();window.compMoveWindow()})});document.getElementById("message").innerText=w[window.randomIntFromInterval(0,w.length-1)]},F=a=>{a?(window.modal(y[window.randomIntFromInterval(0,y.length-
1)],1500),window.sleep(1500).then(()=>z())):z()};let v=0;const G=["Carrier","Battleship","Cruiser","Submarine","Destroyer"],m=[],l=[];let A=0;for(;5>A;)m.push(window.randomIntFromInterval(0,9)),l.push(window.randomIntFromInterval(0,9)),A++;(()=>{document.getElementById("playerWins").textContent="Player Wins: "+window.playerWinsOnLoad();for(let a=0;10>a;a++){h.push([]);for(let e=0;10>e;e++){h[a].push([0,""]);const g=document.createElement("div");H.appendChild(g);g.id="s"+e+a;const c=50*a+5;g.style.top=
50*e+5+"px";g.style.left=c+"px";g.style.background="rgb(128, 170, 255)";g.addEventListener("mouseover",I);g.addEventListener("mouseleave",J);g.addEventListener("click",p)}}k(5);k(4);k(3);k(3);k(2);window.exportedGameBoard=h;document.addEventListener("keydown",function(a){if(192==a.keyCode)for(console.log(h),a=0;10>a;a++)for(let e=0;10>e;e++)1==h[a][e][0]&&(document.getElementById("s"+a+e).style.background="white")})})()})();
